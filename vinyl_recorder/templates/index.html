<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Katie's Vinyl Collection</title>
<style>
    /* Basic reset */
    * { margin:0; padding:0; box-sizing:border-box; }
    
    body {
        font-family: 'Segoe UI', Roboto, -apple-system, BlinkMacSystemFont, sans-serif;
        background: #f5f5f5;
        color: #333;
        line-height: 1.4;
        padding: 20px;
    }

    h1 {
        text-align: center;
        font-weight: 600;
        font-size: 2rem;
        margin-bottom: 10px;
        color: #222;
    }

    .subtitle {
        text-align: center;
        color: #666;
        margin-bottom: 20px;
        font-size: 1rem;
    }

    .controls {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        justify-content: center;
        margin-bottom: 20px;
    }

    .search-box, .filter-select, .grid-btn {
        padding: 10px 15px;
        border-radius: 8px;
        border: 1px solid #ccc;
        font-size: 0.95rem;
    }

    /* Pinterest-style grid */
    .album-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
        gap: 15px;
    }

    .album-card {
        background: white;
        border-radius: 12px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        overflow: hidden;
        cursor: pointer;
        transition: transform 0.2s, box-shadow 0.2s;
        display: flex;
        flex-direction: column;
    }

    .album-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px rgba(0,0,0,0.15);
    }

    .album-cover {
        width: 100%;
        display: block;
        aspect-ratio: 1;
        object-fit: cover;
    }

    .album-info {
        padding: 10px;
        flex: 1;
        display: flex;
        flex-direction: column;
    }

    .artist { font-weight: 600; font-size: 0.95rem; color: #444; margin-bottom: 3px; }
    .album-title { font-size: 0.9rem; margin-bottom: 2px; color: #222; }
    .album-year { font-size: 0.8rem; color: #666; margin-bottom: 5px; }

    .tracklist { display: none; font-size: 0.8rem; color: #555; margin-top: 5px; }
    .tracklist.show { display: block; }

    /* Mobile tweaks */
    @media (max-width: 600px) {
        .album-grid {
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
        }
        h1 { font-size: 1.5rem; }
    }

</style>
</head>
<body>
    <h1>ðŸŽµ Katie's Vinyl Collection</h1>
    <div class="subtitle">{{ total_count }} albums and counting</div>

    <div class="controls">
        <input type="text" id="searchBox" class="search-box" placeholder="Search artist or album..." onkeyup="filterAlbums()">
        <select id="sortSelect" class="filter-select" onchange="sortAlbums()">
            <option value="artist">Artist</option>
            <option value="album">Album Title</option>
        </select>
    </div>

    <div class="album-grid" id="albumGrid">
        {% for album in albums %}
        <div class="album-card" data-artist="{{ album.artist|lower }}" data-album="{{ album.album_title|lower }}" onclick="toggleTracklist(this)">
            <img class="album-cover" src="{{ album.image_url or 'https://via.placeholder.com/240x240?text=No+Image' }}" alt="{{ album.artist }} - {{ album.album_title }}">
            <div class="album-info">
                <div class="artist">{{ album.artist }}</div>
                <div class="album-title">{{ album.album_title }}</div>
                <div class="album-year">{{ album.album_year or 'Year Unknown' }}</div>
                {% if album.tracklist %}
                <div class="tracklist">
                    <strong>Tracks:</strong>
                    {% for track in album.tracklist %}
                        <div class="track">{{ track }}</div>
                    {% endfor %}
                </div>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>

    <script>
        function toggleTracklist(card) {
            const tracklist = card.querySelector('.tracklist');
            if (tracklist) tracklist.classList.toggle('show');
        }

        function sortAlbums() {
            const sortBy = document.getElementById('sortSelect').value;
            const grid = document.getElementById('albumGrid');
            const cards = Array.from(grid.querySelectorAll('.album-card'));
            cards.sort((a,b)=>{
                let aVal = sortBy === 'artist' ? a.dataset.artist : a.dataset.album;
                let bVal = sortBy === 'artist' ? b.dataset.artist : b.dataset.album;
                return aVal.localeCompare(bVal);
            });
            cards.forEach(c=>grid.appendChild(c));
        }

        function filterAlbums() {
            const term = document.getElementById('searchBox').value.toLowerCase();
            const cards = document.querySelectorAll('.album-card');
            cards.forEach(c=>{
                const match = c.dataset.artist.includes(term) || c.dataset.album.includes(term);
                c.style.display = match ? 'block' : 'none';
            });
        }
    </script>
</body>
</html>
